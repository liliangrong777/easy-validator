var global,factory;global=this,factory=function(t){"use strict";var e=function(){function t(){this.type="__required"}return t.prototype.validate=function(t,e){if(""===e)return t.message||"Required"},t}(),r=function(){function t(){this.type="__regexp"}return t.prototype.validate=function(t,e){if(!t.reg.test(e))return t.message||"Invalid"},t}(),a=function(){function t(){this.type="__custom"}return t.prototype.validate=function(t,e){try{t.validator(t,e)}catch(t){return t}},t}(),i=function(){function t(t){if(this.validates=[],this.rules=[],t){if(!Array.isArray(t))throw new Error("Invalid rules. Expected an array.");for(var e=0,r=t;e<r.length;e++){var a=r[e];if(!("required"in a||"reg"in a||"validator"in a||"type"in a))throw new Error("Invalid rule item. Must have a valid structure.")}t.length>0&&(this.add.apply(this,t),this.rules=t)}}return t.getOrCreateStrategy=function(e){var r=t.strategies.get(e);return r||(r=new t.defaultStrategies[e],t.strategies.set(e,r)),r},t.addStrategies=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){t.strategies.set(e.type,e)}))},t.getRuleStrategy=function(e){if(e.required)return t.getOrCreateStrategy("__required");if(e.reg)return t.getOrCreateStrategy("__regexp");if(e.validator)return t.getOrCreateStrategy("__custom");var r=t.strategies.get(e.type);if(r)return r;throw new Error("Invalid rule item")},t.prototype.add=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var a=0;a<e.length;a++){var i=e[a],n=t.getRuleStrategy(i);this.validates.push(n),this.rules.push(i)}},t.prototype.run=function(t){for(var e="",r=0;r<this.validates.length;r++){var a=this.validates[r],i=this.rules[r],n=a.validate(i,t);if(n){e=n;break}}return e},t.defaultStrategies={__required:e,__regexp:r,__custom:a},t.strategies=new Map,t}();t.Validator=i,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global="undefined"!=typeof globalThis?globalThis:global||self)["easy-validator"]={});
